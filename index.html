<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Physics Practice Hub</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background-color: #eef2f3; }
    h1, h2, h3 { color: #333; }
    .section { margin-top: 30px; border-top: 1px solid #ccc; padding-top: 20px; }
    .topics-grid { display: flex; flex-wrap: wrap; gap: 20px; }
    .topic-column { flex: 1 1 300px; }
    label { display: block; margin: 5px 0; }
    button { margin-top: 20px; padding: 10px 15px; font-size: 1em; display: inline-block; }
    #question-box { background: #fff; padding: 15px; border-radius: 10px; margin-top: 30px; box-shadow: 0 2px 6px rgba(0,0,0,0.1); }
    #score-box { font-weight: bold; margin-top: 10px; }
    .question-img { max-width: 100%; height: auto; margin: 10px 0; }
  </style>
</head>
<body>
  <h1>Cambridge Physics 9702 Practice Hub</h1>

  <!-- Whole Course Section -->
  <div class="section">
    <h2>Whole Course</h2>
    <label><input type="checkbox" id="whole-defs" onchange="toggleByGroup('defs', this.checked)"> Definitions</label>
    <label><input type="checkbox" id="whole-eqs" onchange="toggleByGroup('eqs', this.checked)"> Equations</label>
    <button onclick="startPractice()">Start Practice</button>
  </div>

  <!-- By Topic Section -->
  <div class="section">
    <h2>By Topic</h2>
    <div class="topics-grid">
      <div class="topic-column" id="topic-columns-left"></div>
      <div class="topic-column" id="topic-columns-right"></div>
    </div>
  </div>

  <!-- Another Start Practice Button at Bottom -->
  <div class="section">
    <button onclick="startPractice()">Start Practice</button>
  </div>

  <div id="score-box">Score: <span id="score">0</span></div>
  <div id="question-box"></div>

  <script>
    // Topics array (11 topics)
    const topics = [
      "Physical quantities and units",
      "Kinematics",
      "Dynamics",
      "Forces, density and pressure",
      "Work, energy and power",
      "Deformation of solids",
      "Waves",
      "Superposition",
      "Electricity",
      "D.C. circuits",
      "Particle and nuclear physics"
    ];

    // Generate topic checkboxes in two columns
    function generateTopicCheckboxes() {
      const left = document.getElementById("topic-columns-left");
      const right = document.getElementById("topic-columns-right");
      topics.forEach((name, i) => {
        const topicNum = i + 1;
        const block = `
          <h3>${topicNum}. ${name}</h3>
          <label><input type="checkbox" id="topic${topicNum}-defs"> Definitions</label>
          <label><input type="checkbox" id="topic${topicNum}-eqs"> Equations</label>
        `;
        if (i % 2 === 0) left.innerHTML += block;
        else right.innerHTML += block;
      });
    }

    // Toggle checkboxes for a given type
    function toggleByGroup(typeSuffix, isChecked) {
      const all = document.querySelectorAll(`input[type='checkbox'][id^='topic'][id$='-${typeSuffix}']`);
      all.forEach(box => box.checked = isChecked);
    }

    // Combined question bank including both definitions and equation questions
    const questionBank = [
      // ------------------------- Topic 1: Physical quantities and units -------------------------
      {
        topic: 1,
        type: "equation",
        question: function() {
          const km = 3.2;
          const m = km * 1000;
          return {
            text: `Convert ${km} km to meters.`,
            answer: m.toFixed(0),
            model: `Multiply by 1000: ${km} km = ${m} m.`
          };
        }
      },
      {
        topic: 1,
        type: "equation",
        question: function() {
          const grams = 5000;
          const kg = grams / 1000;
          return {
            text: `Express ${grams} g in kilograms.`,
            answer: kg.toFixed(1),
            model: `Divide by 1000: ${grams} g = ${kg} kg.`
          };
        }
      },
      {
        topic: 1,
        type: "equation",
        question: function() {
          const km = 60, hr = 1;
          const mps = (km * 1000) / (hr * 3600);
          return {
            text: `A car travels ${km} km in ${hr} hour. What is its speed in m/s?`,
            answer: mps.toFixed(2),
            model: `Speed = (60×1000)/3600 = ${mps.toFixed(2)} m/s.`
          };
        }
      },
      {
        topic: 1,
        type: "equation",
        question: function() {
          const mass_g = 2000, volume_cm3 = 500;
          const density = (mass_g / 1000) / (volume_cm3 / 1e6);
          return {
            text: `A substance has a mass of ${mass_g} g and a volume of ${volume_cm3} cm³. Calculate its density in kg/m³.`,
            answer: density.toFixed(0),
            model: `Density = (2000/1000) / (500/1e6) = ${density.toFixed(0)} kg/m³.`
          };
        }
      },
      // Definition questions for Topic 1
      {
        topic: 1,
        type: "definition",
        question: "Define a scalar quantity.",
        keywords: ["magnitude", "no direction"],
        alternatives: { "magnitude": ["size", "value", "quantity"], "no direction": ["no specific direction", "direction not involved"] },
        model: "A scalar quantity has magnitude (or size/value) and no direction."
      },
      {
        topic: 1,
        type: "definition",
        question: "Define a vector quantity.",
        keywords: ["magnitude", "direction"],
        alternatives: { "magnitude": ["size", "value", "quantity"], "direction": ["specified direction", "particular direction"] },
        model: "A vector quantity has both magnitude (or size/value) and direction."
      },
      {
        topic: 1,
        type: "definition",
        question: "Define SI base quantity.",
        keywords: ["defined", "without reference", "other quantities"],
        alternatives: { "defined": ["specified"], "without reference": ["independent"] },
        model: "A base quantity is a quantity defined without reference to other quantities."
      },
      {
        topic: 1,
        type: "definition",
        question: "Define random error.",
        keywords: ["unpredictable", "varying", "measurement"],
        alternatives: {},
        model: "A random error is an unpredictable variation in measurement from one reading to another."
      },
      {
        topic: 1,
        type: "definition",
        question: "Define systematic error.",
        keywords: ["consistent", "bias", "same direction"],
        alternatives: {},
        model: "A systematic error is a consistent bias in measurement that occurs in the same direction every time."
      },
      {
        topic: 1,
        type: "definition",
        question: "Define precision.",
        keywords: ["consistency", "repeat readings"],
        alternatives: {},
        model: "Precision refers to the consistency of repeated measurements."
      },
      {
        topic: 1,
        type: "definition",
        question: "Define accuracy.",
        keywords: ["closeness", "true value"],
        alternatives: {},
        model: "Accuracy refers to how close a measured value is to the true value."
      },
      {
        topic: 1,
        type: "definition",
        question: "Define absolute uncertainty.",
        keywords: ["margin", "measured value"],
        alternatives: {},
        model: "Absolute uncertainty is the margin of uncertainty in a measured value."
      },
      {
        topic: 1,
        type: "definition",
        question: "Define percentage uncertainty.",
        keywords: ["absolute uncertainty", "percentage", "measured value"],
        alternatives: {},
        model: "Percentage uncertainty is the absolute uncertainty expressed as a percentage of the measured value."
      },
      {
        topic: 1,
        type: "definition",
        question: "Explain how to combine uncertainties for multiplication and division.",
        keywords: ["add", "percentage", "uncertainties"],
        alternatives: {},
        model: "When multiplying or dividing values, add their percentage uncertainties."
      },
      // Additional Hard Question for Topic 1
      {
        topic: 1,
        type: "equation",
        difficulty: "Hard",
        question: function() {
          const length = 1.20; // m
          const uncertainty = 0.02; // m
          const percentage = (uncertainty / length) * 100;
          return {
            text: `An object is measured to be ${length} m with an absolute uncertainty of ${uncertainty} m. Calculate the percentage uncertainty of the measurement.`,
            answer: percentage.toFixed(2) + " %",
            model: `Percentage uncertainty = (absolute uncertainty/measured value) × 100 = (${uncertainty}/${length})×100 ≈ ${percentage.toFixed(2)} %.`
          };
        }
      },

      // ------------------------- Topic 2: Kinematics -------------------------
      {
        topic: 2,
        type: "equation",
        question: function() {
          const u = Math.floor(Math.random() * 10 + 5);
          const a = Math.floor(Math.random() * 4 + 1);
          const t = Math.floor(Math.random() * 4 + 2);
          const s = u * t + 0.5 * a * t * t;
          return {
            text: `A body starts with a speed of ${u} m/s and accelerates at ${a} m/s² for ${t} s. Calculate the displacement.`,
            answer: s.toFixed(1),
            model: `s = ut + 0.5at² = ${u}×${t} + 0.5×${a}×${t}² = ${s.toFixed(1)} m.`
          };
        }
      },
      {
        topic: 2,
        type: "equation",
        question: function() {
          const m = Math.floor(Math.random() * 20 + 5);
          const angle = Math.floor(Math.random() * 30 + 10);
          const d = Math.floor(Math.random() * 10 + 2);
          const g = 9.8;
          const radians = angle * Math.PI / 180;
          const a = g * Math.sin(radians);
          const vSquared = 2 * a * d;
          const v = Math.sqrt(vSquared);
          return {
            text: `A ${m} kg block slides down a frictionless slope inclined at ${angle}°. It travels ${d} m. Calculate the speed at the bottom.`,
            answer: v.toFixed(2),
            model: `a = 9.8×sin(${angle}°) = ${a.toFixed(2)} m/s², v² = 2×${a.toFixed(2)}×${d} = ${vSquared.toFixed(2)}, so v = ${v.toFixed(2)} m/s.`,
            image: "https://upload.wikimedia.org/wikipedia/commons/thumb/0/08/Free_body_diagram_-_inclined_plane_no_friction.svg/640px-Free_body_diagram_-_inclined_plane_no_friction.svg.png"
          };
        }
      },
      {
        topic: 2,
        type: "equation",
        question: function() {
          const u = Math.floor(Math.random() * 10 + 10);
          const angle = Math.floor(Math.random() * 30 + 30);
          const radians = angle * Math.PI / 180;
          const g = 9.8;
          const R = (u * u * Math.sin(2 * radians)) / g;
          return {
            text: `A projectile is launched at ${angle}° with an initial speed of ${u} m/s. Calculate its horizontal range.`,
            answer: R.toFixed(2),
            model: `Range = (u² sin(2θ))/g = (${u}² sin(2×${angle}°))/9.8 = ${R.toFixed(2)} m.`
          };
        }
      },
      {
        topic: 2,
        type: "equation",
        question: function() {
          const h = Math.floor(Math.random() * 20 + 10);
          const g = 9.8;
          const t = Math.sqrt((2 * h) / g);
          return {
            text: `An object is launched horizontally from a height of ${h} m. Calculate the time to hit the ground.`,
            answer: t.toFixed(2),
            model: `t = √(2h/g) = √(2×${h}/9.8) = ${t.toFixed(2)} s.`
          };
        }
      },
      {
        topic: 2,
        type: "equation",
        question: function() {
          const t = Math.floor(Math.random() * 4 + 2);
          const g = 9.8;
          const s = 0.5 * g * t * t;
          return {
            text: `An object in free-fall for ${t} s falls a distance of:`,
            answer: s.toFixed(1),
            model: `s = 0.5×9.8×${t}² = ${s.toFixed(1)} m.`
          };
        }
      },
      {
        topic: 2,
        type: "equation",
        question: function() {
          const u = Math.floor(Math.random() * 10 + 10);
          const angle = Math.floor(Math.random() * 30 + 30);
          const radians = angle * Math.PI / 180;
          const g = 9.8;
          const R = (u * u * Math.sin(2 * radians)) / g;
          return {
            text: `A projectile is launched with an initial speed of ${u} m/s at an angle of ${angle}°. Calculate its range.`,
            answer: R.toFixed(2),
            model: `Range = (u² sin(2θ))/g = (${u}² sin(2×${angle}°))/9.8 = ${R.toFixed(2)} m.`
          };
        }
      },
      // Definition questions for Topic 2
      {
        topic: 2,
        type: "definition",
        question: "Define displacement.",
        keywords: ["distance", "specified direction"],
        alternatives: { "specified direction": ["in a direction", "particular direction"] },
        model: "Displacement is the distance moved in a specified direction."
      },
      {
        topic: 2,
        type: "definition",
        question: "Define speed.",
        keywords: ["distance", "per unit time"],
        alternatives: { "per unit time": ["in a given time", "per second"] },
        model: "Speed is the distance traveled per unit time."
      },
      {
        topic: 2,
        type: "definition",
        question: "Define velocity.",
        keywords: ["displacement", "per unit time"],
        alternatives: { "per unit time": ["in a given time", "per second"] },
        model: "Velocity is the displacement per unit time."
      },
      {
        topic: 2,
        type: "definition",
        question: "Define acceleration.",
        keywords: ["change in velocity", "per unit time"],
        alternatives: { "change in velocity": ["difference in velocity"] },
        model: "Acceleration is the change in velocity per unit time."
      },
      {
        topic: 2,
        type: "definition",
        question: "State what the gradient of a displacement–time graph represents.",
        keywords: ["velocity"],
        alternatives: {},
        model: "The gradient of a displacement–time graph represents velocity."
      },
      {
        topic: 2,
        type: "definition",
        question: "State what the gradient of a velocity–time graph represents.",
        keywords: ["acceleration"],
        alternatives: {},
        model: "The gradient of a velocity–time graph represents acceleration."
      },
      {
        topic: 2,
        type: "definition",
        question: "State what the area under a velocity–time graph represents.",
        keywords: ["displacement"],
        alternatives: {},
        model: "The area under a velocity–time graph represents displacement."
      },
      // Additional Hard Multi-Part Question for Topic 2
      {
        topic: 2,
        type: "equation",
        difficulty: "Hard",
        multi: true,
        question: function() {
          const mass = 20; // kg
          const angle = 23; // degrees
          const distance = 5; // m
          const g = 9.8;
          const a = g * Math.sin(angle * Math.PI / 180);
          const v = Math.sqrt(2 * a * distance);
          const ke = 0.5 * mass * v * v;
          return {
            text: `A ${mass} kg block slides down a frictionless slope inclined at ${angle}°. It travels ${distance} m. Calculate: (a) the acceleration down the slope, (b) the final speed at the bottom, and (c) the kinetic energy at the bottom.`,
            answers: { a: a.toFixed(2), b: v.toFixed(2), c: ke.toFixed(2) },
            model: { 
               a: `a = g×sin(${angle}°) = 9.8×sin(${angle}°) ≈ ${a.toFixed(2)} m/s²`,
               b: `v² = 2×a×distance = 2×${a.toFixed(2)}×${distance} ≈ ${(2*a*distance).toFixed(2)}, so v ≈ ${v.toFixed(2)} m/s`,
               c: `KE = 0.5×mass×v² = 0.5×${mass}×${v.toFixed(2)}² ≈ ${ke.toFixed(2)} J`
            }
          };
        }
      },

      // ------------------------- Topic 3: Dynamics -------------------------
      {
        topic: 3,
        type: "equation",
        question: function() {
          const L = Math.floor(Math.random() * 5 + 1);
          const W = Math.floor(Math.random() * 50 + 20);
          const theta = Math.floor(Math.random() * 30 + 30);
          const radians = theta * Math.PI / 180;
          const T = (W * L / 2) / (L * Math.sin(radians));
          return {
            text: `A uniform beam of length ${L} m and weight ${W} N is supported by a string at an angle of ${theta}° with the beam. Calculate the tension in the string.`,
            answer: T.toFixed(1),
            model: `T = [W×(L/2)]/(L×sin(${theta}°)) = ${T.toFixed(1)} N.`
          };
        }
      },
      {
        topic: 3,
        type: "equation",
        question: function() {
          const m1 = 2, m2 = 3, u1 = 3, u2 = 0;
          const vf = (m1 * u1 + m2 * u2) / (m1 + m2);
          return {
            text: `A ${m1} kg object moving at 3 m/s collides inelastically with a ${m2} kg object at rest. Calculate the final velocity.`,
            answer: vf.toFixed(2),
            model: `vf = (2×3 + 3×0)/(2+3) = ${vf.toFixed(2)} m/s.`
          };
        }
      },
      {
        topic: 3,
        type: "equation",
        question: function() {
          const m = Math.floor(Math.random() * 20 + 5);
          const a = Math.floor(Math.random() * 5 + 1);
          const F = m * a;
          return {
            text: `An object of mass ${m} kg accelerates at ${a} m/s². Calculate the net force acting on it.`,
            answer: F.toFixed(1),
            model: `F = m×a = ${m}×${a} = ${F.toFixed(1)} N.`
          };
        }
      },
      {
        topic: 3,
        type: "equation",
        question: function() {
          const F_applied = Math.floor(Math.random() * 50 + 50);
          const friction = Math.floor(Math.random() * 20 + 10);
          const netF = F_applied - friction;
          return {
            text: `A force of ${F_applied} N is applied to an object while friction opposes with ${friction} N. Calculate the net force.`,
            answer: netF.toFixed(1),
            model: `Net force = ${F_applied} N - ${friction} N = ${netF.toFixed(1)} N.`
          };
        }
      },
      {
        topic: 3,
        type: "equation",
        question: function() {
          const m1 = 2, m2 = 3;
          const u1 = Math.floor(Math.random() * 10 + 5);
          const u2 = Math.floor(Math.random() * 10);
          const v1 = ((m1 - m2) / (m1 + m2)) * u1 + ((2 * m2) / (m1 + m2)) * u2;
          return {
            text: `A ${m1} kg object moving at ${u1} m/s collides elastically with a ${m2} kg object moving at ${u2} m/s. Calculate the final velocity of the ${m1} kg object.`,
            answer: v1.toFixed(2),
            model: `v1 = ((m1-m2)/(m1+m2))*u1 + (2*m2/(m1+m2))*u2 = ${v1.toFixed(2)} m/s.`
          };
        }
      },
      // Definition questions for Topic 3
      {
        topic: 3,
        type: "definition",
        question: "State Newton’s First Law of Motion.",
        keywords: ["body remains at rest", "constant velocity", "no resultant force"],
        alternatives: { "constant velocity": ["uniform motion"] },
        model: "A body remains at rest or in constant motion unless acted upon by a resultant force."
      },
      {
        topic: 3,
        type: "definition",
        question: "State Newton’s Second Law of Motion.",
        keywords: ["acceleration", "proportional", "net force", "inversely", "mass"],
        alternatives: {},
        model: "The acceleration of an object is directly proportional to the net force acting on it and inversely proportional to its mass."
      },
      {
        topic: 3,
        type: "definition",
        question: "State Newton’s Third Law of Motion.",
        keywords: ["equal", "opposite", "forces", "different bodies"],
        alternatives: {},
        model: "Every action has an equal and opposite reaction."
      },
      {
        topic: 3,
        type: "definition",
        question: "Define inertia.",
        keywords: ["reluctance", "change", "motion"],
        alternatives: { "reluctance": ["resistance"] },
        model: "Inertia is the tendency of a body to resist changes in its state of motion."
      },
      // Additional Hard Multi-Part Question for Topic 3
      {
        topic: 3,
        type: "equation",
        difficulty: "Hard",
        multi: true,
        question: function() {
          const mass = 5; // kg
          const F1 = 15; // N to the right
          const F2 = 10; // N to the left
          const netF = F1 - F2;
          const a = netF / mass;
          const t = 4; // s
          const v = a * t;
          return {
            text: `A ${mass} kg object is acted upon by two forces: ${F1} N to the right and ${F2} N to the left. It starts from rest. Calculate: (a) the net force, (b) the acceleration, and (c) the speed after ${t} s.`,
            answers: { a: netF.toFixed(2), b: a.toFixed(2), c: v.toFixed(2) },
            model: {
               a: `Net force = ${F1} N - ${F2} N = ${netF} N.`,
               b: `Acceleration = net force / mass = ${netF} / ${mass} = ${a.toFixed(2)} m/s².`,
               c: `Speed after ${t} s = a×t = ${a.toFixed(2)}×${t} = ${v.toFixed(2)} m/s.`
            }
          };
        }
      },

      // ------------------------- Topic 4: Forces, density and pressure -------------------------
      {
        topic: 4,
        type: "equation",
        question: function() {
          const h = Math.floor(Math.random() * 10 + 5);
          const rho = 1000, g = 9.8;
          const pressure = rho * g * h;
          return {
            text: `Calculate the hydrostatic pressure at a depth of ${h} m in water (density 1000 kg/m³).`,
            answer: pressure.toFixed(0),
            model: `Pressure = ρgh = 1000×9.8×${h} = ${pressure.toFixed(0)} Pa.`
          };
        }
      },
      {
        topic: 4,
        type: "equation",
        question: function() {
          const V = Math.floor(Math.random() * 100 + 100);
          const V_m3 = V / 1e6;
          const rho = 1000, g = 9.8;
          const F_b = rho * g * V_m3;
          return {
            text: `An object displaces ${V} cm³ of water. Calculate the buoyant force acting on it.`,
            answer: F_b.toFixed(2),
            model: `Buoyant force = ρgV = 1000×9.8×(${V}/1e6) = ${F_b.toFixed(2)} N.`
          };
        }
      },
      {
        topic: 4,
        type: "equation",
        question: function() {
          const A = Math.floor(Math.random() * 50 + 50);
          const A_m2 = A / 10000;
          const h = Math.floor(Math.random() * 4 + 2);
          const rho = 1000, g = 9.8;
          const F = rho * g * h * A_m2;
          return {
            text: `A container with a base area of ${A} cm² is filled with water to a height of ${h} m. Calculate the force on the base.`,
            answer: F.toFixed(1),
            model: `Force = ρghA = 1000×9.8×${h}×(${A}/10000) = ${F.toFixed(1)} N.`
          };
        }
      },
      // Definition questions for Topic 4
      {
        topic: 4,
        type: "definition",
        question: "Define pressure.",
        keywords: ["force", "area"],
        alternatives: {},
        model: "Pressure is defined as force per unit area."
      },
      {
        topic: 4,
        type: "definition",
        question: "Define density.",
        keywords: ["mass", "volume"],
        alternatives: {},
        model: "Density is the mass per unit volume."
      },
      // Additional Hard Multi-Part Question for Topic 4
      {
        topic: 4,
        type: "equation",
        difficulty: "Hard",
        multi: true,
        question: function() {
          const area_cm2 = 500;
          const area_m2 = area_cm2 / 10000;
          const height = 2.5;
          const rho = 1000, g = 9.8;
          const pressure = rho * g * height;
          const pressureIncrease = 0.1 * pressure;
          const additionalForce = pressureIncrease * area_m2;
          return {
            text: `A container has a base area of ${area_cm2} cm² and is filled with water to a height of ${height} m. Calculate: (a) the hydrostatic pressure on the base, and (b) the additional force required to increase the pressure by 10%.`,
            answers: { a: pressure.toFixed(0) + " Pa", b: additionalForce.toFixed(2) + " N" },
            model: {
               a: `Pressure = ρgh = ${rho}×${g}×${height} ≈ ${pressure.toFixed(0)} Pa.`,
               b: `10% increase = ${pressureIncrease.toFixed(0)} Pa, additional force = pressureIncrease × area = ${pressureIncrease.toFixed(0)}×${area_m2.toFixed(3)} ≈ ${additionalForce.toFixed(2)} N.`
            }
          };
        }
      },

      // ------------------------- Topic 5: Work, energy and power -------------------------
      {
        topic: 5,
        type: "equation",
        question: function() {
          const m = Math.floor(Math.random() * 10 + 1);
          const v = Math.floor(Math.random() * 10 + 1);
          const KE = 0.5 * m * v * v;
          return {
            text: `Calculate the kinetic energy of an object of mass ${m} kg moving at ${v} m/s.`,
            answer: KE.toFixed(1),
            model: `KE = ½mv² = 0.5×${m}×${v}² = ${KE.toFixed(1)} J.`
          };
        }
      },
      {
        topic: 5,
        type: "equation",
        question: function() {
          const m = Math.floor(Math.random() * 10 + 1);
          const h = Math.floor(Math.random() * 10 + 1);
          const g = 9.8;
          const GPE = m * g * h;
          return {
            text: `Calculate the gravitational potential energy of an object of mass ${m} kg raised to a height of ${h} m.`,
            answer: GPE.toFixed(1),
            model: `GPE = mgh = ${m}×9.8×${h} = ${GPE.toFixed(1)} J.`
          };
        }
      },
      {
        topic: 5,
        type: "equation",
        question: function() {
          const W = Math.floor(Math.random() * 200 + 100);
          const t = Math.floor(Math.random() * 10 + 1);
          const P = W / t;
          return {
            text: `If ${W} J of work is done in ${t} s, calculate the power output.`,
            answer: P.toFixed(1),
            model: `Power = Work/time = ${W}/${t} = ${P.toFixed(1)} W.`
          };
        }
      },
      {
        topic: 5,
        type: "equation",
        question: function() {
          const F = Math.floor(Math.random() * 50 + 50);
          const d = Math.floor(Math.random() * 10 + 5);
          const work = F * d;
          return {
            text: `Calculate the work done when a force of ${F} N moves an object through ${d} m.`,
            answer: work.toFixed(1),
            model: `Work = F × d = ${F}×${d} = ${work.toFixed(1)} J.`
          };
        }
      },
      // Definition questions for Topic 5
      {
        topic: 5,
        type: "definition",
        question: "State what is meant by the work done by a force.",
        keywords: ["force", "displacement", "direction"],
        alternatives: { "direction": ["in direction of force"] },
        model: "Work is done when a force causes displacement in the direction of the force."
      },
      {
        topic: 5,
        type: "definition",
        question: "Define kinetic energy.",
        keywords: ["half", "mass", "velocity squared"],
        alternatives: { "velocity squared": ["speed squared"] },
        model: "Kinetic energy is equal to one-half times mass times the square of the velocity."
      },
      {
        topic: 5,
        type: "definition",
        question: "Define power.",
        keywords: ["rate", "energy transfer"],
        alternatives: { "energy transfer": ["doing work"] },
        model: "Power is the rate at which energy is transferred or work is done."
      },
      // Additional Hard Multi-Part Question for Topic 5
      {
        topic: 5,
        type: "equation",
        difficulty: "Hard",
        multi: true,
        question: function() {
          const F = 30; // N
          const d = 4; // m
          const time = 8; // s
          const work = F * d;
          const power = work / time;
          return {
            text: `A force of ${F} N is applied to move an object through ${d} m in ${time} s. Calculate: (a) the work done, (b) the power output, and (c) if the force were increased by 50%, what would be the new work done over the same distance?`,
            answers: { a: work.toFixed(1), b: power.toFixed(1), c: (F * 1.5 * d).toFixed(1) },
            model: {
               a: `Work = F × d = ${F}×${d} = ${work.toFixed(1)} J.`,
               b: `Power = work/time = ${work.toFixed(1)}/${time} ≈ ${power.toFixed(1)} W.`,
               c: `New force = 1.5×${F} = ${F * 1.5} N, so new work = new force × d = ${F * 1.5}×${d} = ${(F*1.5*d).toFixed(1)} J.`
            }
          };
        }
      },

      // ------------------------- Topic 6: Deformation of solids -------------------------
      {
        topic: 6,
        type: "equation",
        question: function() {
          const stress = Math.floor(Math.random() * 10 + 5); // MPa
          const strain = Math.random() * 0.01 + 0.001;
          const E = stress / strain;
          return {
            text: `A material has a stress of ${stress} MPa and a strain of ${strain.toFixed(4)}. Calculate its Young's modulus in GPa.`,
            answer: (E/1000).toFixed(2),
            model: `E = stress/strain = ${stress} MPa / ${strain.toFixed(4)} = ${(E).toFixed(2)} MPa, i.e., ${(E/1000).toFixed(2)} GPa.`
          };
        }
      },
      {
        topic: 6,
        type: "equation",
        question: function() {
          const k = Math.floor(Math.random() * 200 + 100);
          const F = Math.floor(Math.random() * 50 + 10);
          const extension = F / k;
          return {
            text: `A spring with constant ${k} N/m is subjected to a force of ${F} N. Calculate its extension.`,
            answer: extension.toFixed(3),
            model: `Extension = F/k = ${F}/${k} = ${extension.toFixed(3)} m.`
          };
        }
      },
      {
        topic: 6,
        type: "equation",
        question: function() {
          const L0 = Math.floor(Math.random() * 50 + 50);
          const L0_m = L0 / 100;
          const ext = (Math.floor(Math.random() * 5 + 1)) / 100;
          const strain = ext / L0_m;
          return {
            text: `A rod of original length ${L0} cm is extended by ${ext.toFixed(2)} m. Calculate the strain (as a decimal).`,
            answer: strain.toFixed(3),
            model: `Strain = extension/original length = ${ext.toFixed(2)} / (${L0}/100) = ${strain.toFixed(3)}.`
          };
        }
      },
      // Definition questions for Topic 6
      {
        topic: 6,
        type: "definition",
        question: "State Hooke's Law.",
        keywords: ["extension", "proportional", "force"],
        alternatives: {},
        model: "Hooke's Law states that the extension of a spring is proportional to the applied force, provided the elastic limit is not exceeded."
      },
      {
        topic: 6,
        type: "definition",
        question: "Define stress.",
        keywords: ["force", "cross-sectional area"],
        alternatives: {},
        model: "Stress is the force per unit cross-sectional area."
      },
      {
        topic: 6,
        type: "definition",
        question: "Define strain.",
        keywords: ["extension", "original length"],
        alternatives: {},
        model: "Strain is the extension divided by the original length."
      },
      // Additional Hard Multi-Part Question for Topic 6
      {
        topic: 6,
        type: "equation",
        difficulty: "Hard",
        multi: true,
        question: function() {
          const length = 2; // m
          const area = 1e-4; // m²
          const force = 10000; // N
          const E = 200e9; // Pa
          const stress = force / area;
          const strain = stress / E;
          const elongation = length * strain;
          return {
            text: `A metal rod of length ${length} m and cross-sectional area ${area} m² is subjected to a tensile force of ${force} N. If the Young's modulus is ${E/1e9} GPa, calculate: (a) the stress, (b) the strain, and (c) the elongation of the rod.`,
            answers: { a: stress.toExponential(2) + " Pa", b: strain.toExponential(2), c: elongation.toExponential(2) + " m" },
            model: `a) Stress = F/A = ${force}/${area} = ${stress.toExponential(2)} Pa; b) Strain = stress/E = ${stress.toExponential(2)}/${E} = ${strain.toExponential(2)}; c) Elongation = original length × strain = ${length}×${strain.toExponential(2)} ≈ ${elongation.toExponential(2)} m.`
          };
        }
      },

      // ------------------------- Topic 7: Waves -------------------------
      {
        topic: 7,
        type: "equation",
        question: function() {
          const n = Math.floor(Math.random() * 3 + 1);
          const L = Math.floor(Math.random() * 3 + 1);
          const v = Math.floor(Math.random() * 200 + 100);
          const f = (n * v) / (2 * L);
          return {
            text: `A pipe closed at both ends has a length of ${L} m and a wave speed of ${v} m/s. Calculate the frequency of the ${n}th harmonic.`,
            answer: f.toFixed(1),
            model: `f = n×v/(2L) = ${n}×${v}/(2×${L}) = ${f.toFixed(1)} Hz.`
          };
        }
      },
      {
        topic: 7,
        type: "equation",
        question: function() {
          const d = (Math.floor(Math.random() * 4 + 1)) / 1000;
          const D = Math.floor(Math.random() * 100 + 100);
          const x = (Math.floor(Math.random() * 20 + 10)) / 1000;
          const lambda = (d * x) / (D / 100);
          return {
            text: `In a double-slit experiment with a slit separation of ${(d*1000).toFixed(1)} mm, a screen distance of ${D} cm, and a fringe spacing of ${(x*1000).toFixed(1)} mm, calculate the wavelength in nm.`,
            answer: (lambda * 1e9).toFixed(1),
            model: `λ = (d×x)/(D/100) = (${d}×${x})/(${D}/100) = ${(lambda*1e9).toFixed(1)} nm.`
          };
        }
      },
      {
        topic: 7,
        type: "equation",
        question: function() {
          const L = Math.floor(Math.random() * 3 + 1);
          const v = Math.floor(Math.random() * 100 + 300);
          const f = v / (2 * L);
          const T = 1 / f;
          return {
            multi: true,
            text: `A pipe open at both ends has a length of ${L} m and a sound speed of ${v} m/s.
(a) Calculate the fundamental frequency.
(b) Calculate the time period.`,
            answers: { a: f.toFixed(1), b: T.toFixed(3) },
            model: { a: `f = v/(2L) = ${v}/(2×${L}) = ${f.toFixed(1)} Hz`, b: `T = 1/f = 1/${f.toFixed(1)} = ${T.toFixed(3)} s` }
          };
        }
      },
      {
        topic: 7,
        type: "equation",
        question: function() {
          const L = 3; // m
          const nodes = 5;
          const harmonic = nodes - 1; // for a pipe closed at both ends
          const wavelength = (2 * L) / harmonic;
          const v = 330; // m/s
          const frequency = v / wavelength;
          const period = 1 / frequency;
          return {
            multi: true,
            text: `In a 3 m long pipe closed at both ends, a standing wave is set up with ${nodes} nodes. The speed of sound is ${v} m/s. Calculate: (a) the wavelength, (b) the frequency, and (c) the period of the wave.`,
            answers: { a: wavelength.toFixed(2) + " m", b: frequency.toFixed(2) + " Hz", c: period.toFixed(4) + " s" },
            model: {
               a: `Wavelength = 2L/harmonic = 2×${L}/${harmonic} = ${wavelength.toFixed(2)} m.`,
               b: `Frequency = v/λ = ${v}/${wavelength.toFixed(2)} ≈ ${frequency.toFixed(2)} Hz.`,
               c: `Period = 1/frequency ≈ ${period.toFixed(4)} s.`
            }
          };
        }
      },
      // Definition questions for Topic 7
      {
        topic: 7,
        type: "definition",
        question: "Define wavelength.",
        keywords: ["distance", "adjacent", "same phase"],
        alternatives: {},
        model: "Wavelength is the distance between two successive points on a wave that are in phase."
      },
      {
        topic: 7,
        type: "definition",
        question: "Define frequency.",
        keywords: ["oscillations", "per second"],
        alternatives: { "oscillations": ["cycles", "vibrations"] },
        model: "Frequency is the number of oscillations per second."
      },
      {
        topic: 7,
        type: "definition",
        question: "Define wavefront.",
        keywords: ["points", "same phase"],
        alternatives: {},
        model: "A wavefront is a line joining points on a wave that are in the same phase."
      },
      // Additional Hard Multi-Part Question for Topic 7 (for intermediate steps)
      {
        topic: 7,
        type: "equation",
        difficulty: "Hard",
        multi: true,
        question: function() {
          // This question asks for verification of intermediate steps.
          const L = 2; // m (pipe closed at one end)
          const v = 305; // m/s
          const f = v / (4 * L);  // For a pipe closed at one end, fundamental frequency: f = v/(4L)
          const T = 1 / f;
          return {
            multi: true,
            text: `A pipe closed at one end has a length of ${L} m and a sound speed of ${v} m/s.
(a) Calculate the fundamental frequency.
(b) Calculate the time period.
(c) Verify that frequency and period are reciprocals.`,
            answers: { a: f.toFixed(1), b: T.toFixed(3), c: (f * T).toFixed(2) },
            model: {
               a: `f = v/(4L) = ${v}/(4×${L}) = ${f.toFixed(1)} Hz.`,
               b: `T = 1/f = 1/${f.toFixed(1)} = ${T.toFixed(3)} s.`,
               c: `f×T = ${f.toFixed(1)}×${T.toFixed(3)} ≈ ${(f * T).toFixed(2)} (should equal 1).`
            }
          };
        }
      },

      // ------------------------- Topic 8: Superposition -------------------------
      {
        topic: 8,
        type: "equation",
        question: function() {
          const A1 = Math.floor(Math.random() * 5 + 5);
          const A2 = Math.floor(Math.random() * 5 + 5);
          const resultAmp = A1 + A2;
          return {
            text: `Two waves with amplitudes ${A1} and ${A2} add constructively. Calculate the resultant amplitude.`,
            answer: resultAmp.toFixed(1),
            model: `Resultant amplitude = ${A1} + ${A2} = ${resultAmp}.`
          };
        }
      },
      {
        topic: 8,
        type: "equation",
        question: function() {
          const A1 = Math.floor(Math.random() * 5 + 5);
          const A2 = Math.floor(Math.random() * 5 + 1);
          const resultAmp = Math.abs(A1 - A2);
          return {
            text: `Two waves with amplitudes ${A1} and ${A2} combine destructively. Calculate the resultant amplitude.`,
            answer: resultAmp.toFixed(1),
            model: `Resultant amplitude = |${A1} - ${A2}| = ${resultAmp}.`
          };
        }
      },
      // Additional Hard Multi-Part Question for Topic 8
      {
        topic: 8,
        type: "equation",
        difficulty: "Hard",
        multi: true,
        question: function() {
          const A1 = 4; // units
          const A2 = 4; // units
          const phaseDiff = 45; // degrees
          const resultant = Math.sqrt(A1*A1 + A2*A2 + 2*A1*A2*Math.cos(phaseDiff * Math.PI/180));
          return {
            text: `Two coherent waves, each with an amplitude of ${A1} units, interfere with a phase difference of ${phaseDiff}°. Calculate: (a) the resultant amplitude, (b) the cosine of the phase difference, and (c) verify the resultant amplitude using the formula.`,
            answers: { a: resultant.toFixed(2), b: Math.cos(phaseDiff * Math.PI/180).toFixed(2), c: resultant.toFixed(2) },
            model: {
               a: `Resultant amplitude = √(A₁² + A₂² + 2A₁A₂cosφ) = √(4² + 4² + 2×4×4×cos(45°)) ≈ ${resultant.toFixed(2)} units.`,
               b: `cos(45°) ≈ ${Math.cos(phaseDiff * Math.PI/180).toFixed(2)}.`,
               c: `Verification: using the same formula, we get ≈ ${resultant.toFixed(2)} units.`
            }
          };
        }
      },

      // ------------------------- Topic 9: Electricity -------------------------
      {
        topic: 9,
        type: "equation",
        question: function() {
          const I = Math.floor(Math.random() * 5 + 1);
          const R = Math.floor(Math.random() * 20 + 10);
          const V = I * R;
          return {
            text: `An electric current of ${I} A flows through a resistor of ${R} Ω. Calculate the voltage across it.`,
            answer: V.toFixed(1),
            model: `V = I×R = ${I}×${R} = ${V.toFixed(1)} V.`
          };
        }
      },
      {
        topic: 9,
        type: "equation",
        question: function() {
          const V = Math.floor(Math.random() * 20 + 10);
          const I = Math.floor(Math.random() * 5 + 1);
          const P = V * I;
          return {
            text: `Calculate the power of a circuit with a voltage of ${V} V and a current of ${I} A.`,
            answer: P.toFixed(1),
            model: `P = V×I = ${V}×${I} = ${P.toFixed(1)} W.`
          };
        }
      },
      {
        topic: 9,
        type: "equation",
        question: function() {
          const R1 = Math.floor(Math.random() * 20 + 10);
          const R2 = Math.floor(Math.random() * 20 + 10);
          const R3 = Math.floor(Math.random() * 20 + 10);
          const Rp = 1 / (1/R1 + 1/R2);
          const R_total = Rp + R3;
          return {
            text: `Calculate the total resistance of two resistors (${R1} Ω and ${R2} Ω) in parallel, in series with a ${R3} Ω resistor.`,
            answer: R_total.toFixed(1),
            model: `Rp = 1/(1/${R1}+1/${R2}) = ${Rp.toFixed(1)} Ω, then R_total = Rp + ${R3} = ${R_total.toFixed(1)} Ω.`
          };
        }
      },
      // Definition questions for Topic 9
      {
        topic: 9,
        type: "definition",
        question: "Define electric current.",
        keywords: ["rate", "flow", "charge"],
        alternatives: {},
        model: "Electric current is the rate of flow of electric charge."
      },
      {
        topic: 9,
        type: "definition",
        question: "Define electromotive force (e.m.f.).",
        keywords: ["work done", "unit charge"],
        alternatives: {},
        model: "Electromotive force is the work done per unit charge in moving a charge around a complete circuit."
      },
      {
        topic: 9,
        type: "definition",
        question: "Define electric potential difference.",
        keywords: ["work done", "unit charge", "between two points"],
        alternatives: {},
        model: "Electric potential difference is the work done per unit charge to move a charge between two points."
      },
      // Additional Hard Multi-Part Question for Topic 9
      {
        topic: 9,
        type: "equation",
        difficulty: "Hard",
        multi: true,
        question: function() {
          const R = 10; // Ω
          const Vin = 12; // V
          const I1 = Vin / R; // 1.2 A
          const P1 = I1 * I1 * R; // ≈ 14.4 W
          const R_series = 10; // Ω
          const newTotal = R + R_series; // 20 Ω
          const I2 = Vin / newTotal; // 0.6 A
          return {
            text: `A resistor of ${R} Ω is connected to a battery of ${Vin} V. Calculate: (a) the current through the resistor, (b) the power dissipated in the resistor, and (c) if a second resistor of ${R_series} Ω is added in series, the new current through the circuit.`,
            answers: { a: I1.toFixed(2), b: P1.toFixed(1), c: I2.toFixed(2) },
            model: {
               a: `I = V/R = ${Vin}/${R} = ${I1.toFixed(2)} A.`,
               b: `Power = I²×R = (${I1.toFixed(2)})²×${R} ≈ ${P1.toFixed(1)} W.`,
               c: `New total resistance = ${R} + ${R_series} = ${newTotal} Ω, so I = ${Vin}/${newTotal} ≈ ${I2.toFixed(2)} A.`
            }
          };
        }
      },

      // ------------------------- Topic 10: D.C. circuits -------------------------
      {
        topic: 10,
        type: "equation",
        question: function() {
          const R1 = Math.floor(Math.random() * 50 + 50);
          const R2 = Math.floor(Math.random() * 50 + 50);
          const Vin = Math.floor(Math.random() * 20 + 10);
          const Vout = Vin * (R2 / (R1 + R2));
          return {
            text: `In a voltage divider with resistors of ${R1} Ω and ${R2} Ω and an input voltage of ${Vin} V, calculate the output voltage across the ${R2} Ω resistor.`,
            answer: Vout.toFixed(1),
            model: `Vout = Vin×(R2/(R1+R2)) = ${Vin}×(${R2}/(${R1}+${R2})) = ${Vout.toFixed(1)} V.`
          };
        }
      },
      {
        topic: 10,
        type: "equation",
        question: function() {
          const Vin = Math.floor(Math.random() * 20 + 10);
          const R_total = Math.floor(Math.random() * 100 + 100);
          const I = Vin / R_total;
          return {
            text: `Calculate the current in a series circuit with a total resistance of ${R_total} Ω and a supply voltage of ${Vin} V.`,
            answer: I.toFixed(2),
            model: `I = V/R = ${Vin}/${R_total} = ${I.toFixed(2)} A.`
          };
        }
      },
      {
        topic: 10,
        type: "equation",
        question: function() {
          const I = Math.floor(Math.random() * 5 + 1);
          const R = Math.floor(Math.random() * 100 + 50);
          const P = I * I * R;
          return {
            text: `Calculate the power dissipated in a ${R} Ω resistor with a current of ${I} A.`,
            answer: P.toFixed(1),
            model: `P = I²R = ${I}²×${R} = ${P.toFixed(1)} W.`
          };
        }
      },
      {
        topic: 10,
        type: "equation",
        question: function() {
          const R1 = Math.floor(Math.random() * 50 + 50);
          const R2 = Math.floor(Math.random() * 50 + 50);
          const R3 = Math.floor(Math.random() * 50 + 50);
          const R_total = R1 + R2 + R3;
          return {
            text: `Three resistors of ${R1} Ω, ${R2} Ω, and ${R3} Ω are connected in series. Calculate the total resistance.`,
            answer: R_total.toFixed(1),
            model: `R_total = R1 + R2 + R3 = ${R1} + ${R2} + ${R3} = ${R_total} Ω.`
          };
        }
      },
      // Definition questions for Topic 10
      {
        topic: 10,
        type: "definition",
        question: "Define resistance.",
        keywords: ["voltage", "current"],
        alternatives: {},
        model: "Resistance is the ratio of the voltage across a conductor to the current flowing through it."
      },
      {
        topic: 10,
        type: "definition",
        question: "Define internal resistance.",
        keywords: ["resistance", "within", "source"],
        alternatives: {},
        model: "Internal resistance is the resistance within a power source that causes a drop in the terminal voltage."
      },
      // Additional Hard Multi-Part Question for Topic 10
      {
        topic: 10,
        type: "equation",
        difficulty: "Hard",
        multi: true,
        question: function() {
          const R1 = 100, R2 = 200, R3 = 300, Vin = 12;
          const R_total = R1 + R2 + R3;
          const current = Vin / R_total;
          const V_R2 = current * R2;
          const power_R2 = V_R2 * V_R2 / R2;
          return {
            text: `In a voltage divider circuit, three resistors of ${R1} Ω, ${R2} Ω, and ${R3} Ω are connected in series with an input voltage of ${Vin} V. Calculate: (a) the voltage across the ${R2} Ω resistor and (b) the power dissipated in it.`,
            answers: { a: V_R2.toFixed(2) + " V", b: power_R2.toFixed(2) + " W" },
            model: `Total resistance = ${R_total} Ω; Current = Vin/Total = ${Vin}/${R_total} ≈ ${current.toFixed(2)} A; Voltage across R2 = current × R2 ≈ ${V_R2.toFixed(2)} V; Power = (Voltage across R2)²/R2 ≈ ${power_R2.toFixed(2)} W.`
          };
        }
      },

      // ------------------------- Topic 11: Particle and nuclear physics -------------------------
      {
        topic: 11,
        type: "equation",
        question: function() {
          const initialN = Math.floor(Math.random() * 50 + 50);
          return {
            text: `In beta-minus decay, if a nucleus has a nucleon number of ${initialN}, what is its nucleon number after decay?`,
            answer: initialN.toString(),
            model: `Nucleon number is conserved, so it remains ${initialN}.`
          };
        }
      },
      {
        topic: 11,
        type: "equation",
        question: function() {
          const initialZ = Math.floor(Math.random() * 20 + 10);
          const finalZ = initialZ - 1;
          return {
            text: `A nucleus with a proton number of ${initialZ} undergoes beta-plus decay. What is its new proton number?`,
            answer: finalZ.toString(),
            model: `Proton number decreases by 1: ${initialZ} - 1 = ${finalZ}.`
          };
        }
      },
      {
        topic: 11,
        type: "equation",
        question: function() {
          const initialMass = Math.floor(Math.random() * 200 + 100);
          const finalMass = initialMass - 4;
          return {
            text: `A nucleus with a mass number of ${initialMass} undergoes alpha decay. What is its new mass number?`,
            answer: finalMass.toString(),
            model: `Alpha decay reduces mass number by 4: ${initialMass} - 4 = ${finalMass}.`
          };
        }
      },
      {
        topic: 11,
        type: "equation",
        question: function() {
          const initialMass = Math.floor(Math.random() * 200 + 100);
          const change = 4;
          return {
            text: `A nucleus with mass number ${initialMass} undergoes alpha decay. By how much does its mass number change?`,
            answer: change.toString(),
            model: `Alpha decay reduces the mass number by 4.`
          };
        }
      },
      // Definition questions for Topic 11
      {
        topic: 11,
        type: "definition",
        question: "Define nucleon number.",
        keywords: ["total", "protons", "neutrons"],
        alternatives: {},
        model: "Nucleon number is the total number of protons and neutrons in a nucleus."
      },
      {
        topic: 11,
        type: "definition",
        question: "Define proton number.",
        keywords: ["number", "protons"],
        alternatives: {},
        model: "Proton number is the number of protons in the nucleus of an atom."
      },
      {
        topic: 11,
        type: "definition",
        question: "Define isotope.",
        keywords: ["same", "protons", "different", "neutrons"],
        alternatives: {},
        model: "Isotopes are atoms of the same element with the same number of protons but different numbers of neutrons."
      },
      {
        topic: 11,
        type: "definition",
        question: "Define a hadron.",
        keywords: ["quark", "strong force", "baryon", "meson"],
        alternatives: {},
        model: "A hadron is a particle made of quarks, held together by the strong nuclear force. Hadrons include baryons and mesons."
      },
      {
        topic: 11,
        type: "definition",
        question: "Define a baryon.",
        keywords: ["three quarks"],
        alternatives: {},
        model: "A baryon is a hadron consisting of three quarks."
      },
      {
        topic: 11,
        type: "definition",
        question: "Define a meson.",
        keywords: ["quark", "antiquark"],
        alternatives: {},
        model: "A meson is a hadron composed of one quark and one antiquark."
      },
      {
        topic: 11,
        type: "definition",
        question: "Define a lepton.",
        keywords: ["fundamental", "no strong interaction"],
        alternatives: {},
        model: "A lepton is a fundamental particle that does not experience the strong nuclear force (e.g., electron, muon, neutrino)."
      },
      {
        topic: 11,
        type: "definition",
        question: "Define a quark.",
        keywords: ["six flavours", "up", "down", "charm", "strange", "top", "bottom"],
        alternatives: {},
        model: "A quark is a fundamental particle that comes in six flavours: up, down, charm, strange, top, and bottom."
      },
      {
        topic: 11,
        type: "definition",
        question: "State the charges of up and down quarks.",
        keywords: ["up quark", "+2/3", "down quark", "-1/3"],
        alternatives: {},
        model: "The up quark has a charge of +2/3 e, and the down quark has a charge of -1/3 e."
      },
      {
        topic: 11,
        type: "definition",
        question: "State the quark composition of a proton.",
        keywords: ["uud"],
        alternatives: {},
        model: "A proton is composed of two up quarks and one down quark (uud)."
      },
      {
        topic: 11,
        type: "definition",
        question: "State the quark composition of a neutron.",
        keywords: ["udd"],
        alternatives: {},
        model: "A neutron is composed of one up quark and two down quarks (udd)."
      },
      {
        topic: 11,
        type: "definition",
        question: "Define an antiparticle.",
        keywords: ["same mass", "opposite charge"],
        alternatives: {},
        model: "An antiparticle has the same mass as its corresponding particle but opposite charge."
      },
      {
        topic: 11,
        type: "definition",
        question: "What is emitted during β– decay?",
        keywords: ["electron", "antineutrino"],
        alternatives: {},
        model: "During β– decay, an electron and an electron antineutrino are emitted."
      },
      {
        topic: 11,
        type: "definition",
        question: "What is emitted during β+ decay?",
        keywords: ["positron", "neutrino"],
        alternatives: {},
        model: "During β+ decay, a positron and an electron neutrino are emitted."
      },
      {
        topic: 11,
        type: "definition",
        question: "Define the unified atomic mass unit (u).",
        keywords: ["1/12", "carbon-12"],
        alternatives: {},
        model: "One unified atomic mass unit is 1/12 the mass of a carbon-12 atom."
      },
      // Additional Hard Multi-Part Question for Topic 11
      {
        topic: 11,
        type: "equation",
        difficulty: "Hard",
        multi: true,
        question: function() {
          // Example: A nucleus undergoes beta-minus decay then alpha decay.
          return {
            text: `A nucleus with a mass number of 210 and an atomic number of 84 undergoes beta-minus decay followed by alpha decay. Calculate the final mass number and atomic number.`,
            answers: { a: "206", b: "83" },
            model: `Beta-minus decay: mass number remains 210, atomic number increases to 85. Then alpha decay: mass number = 210 - 4 = 206 and atomic number = 85 - 2 = 83.`
          };
        }
      }
    ];
    
    let currentQuestion = null;
    let score = 0;
    
    function startPractice() {
      score = 0;
      document.getElementById("score").innerText = score;
      askNewQuestion();
      document.getElementById("question-box").scrollIntoView({ behavior: 'smooth' });
    }
    
    function askNewQuestion() {
      const ids = [...document.querySelectorAll("input[type='checkbox']")]
                     .filter(cb => cb.checked)
                     .map(cb => cb.id);
      const filtered = questionBank.map(q => {
        if (typeof q.question === 'function') {
          const built = q.question();
          return { ...q, text: built.text, model: built.model, answer: built.answer, answers: built.answers, image: built.image || null, multi: built.multi || false };
        }
        return q;
      }).filter(q => {
        return ids.some(id => {
          const topicMatch = id.includes(`topic${q.topic}`) || id.startsWith("whole");
          const typeMatch = (id.endsWith("defs") && q.type === "definition") || (id.endsWith("eqs") && q.type === "equation");
          return topicMatch && typeMatch;
        });
      });
      
      if (filtered.length === 0) {
        document.getElementById("question-box").innerText = "No matching questions available yet.";
        return;
      }
      
      const q = filtered[Math.floor(Math.random() * filtered.length)];
      currentQuestion = q;
      if (q.multi) {
        document.getElementById("question-box").innerHTML = `
          <strong>Question:</strong><br>${q.text}<br>
          ${q.image ? "<img class='question-img' src='" + q.image + "' alt='diagram'>" : ""}
          <br>(a) <input type='text' id='part-a' placeholder='Answer to part a'><br>
          (b) <input type='text' id='part-b' placeholder='Answer to part b'><br>
          (c) <input type='text' id='part-c' placeholder='Answer to part c'><br>
          <button onclick='checkMultiPart()'>Check Answers</button>
          <button onclick='showModelAnswer()'>Show Model Answer</button>
          <button onclick='askNewQuestion()'>Next Question</button>
          <div id='feedback' style='margin-top: 10px; font-weight: bold;'></div>
        `;
      } else {
        document.getElementById("question-box").innerHTML = `
          <strong>Question:</strong> ${q.text}<br><br>
          ${q.image ? "<img class='question-img' src='" + q.image + "' alt='diagram'>" : ""}
          <textarea id='student-answer' rows='3' style='width:100%' placeholder='Type your answer here...'></textarea><br>
          <button onclick='checkDefinition()'>Check Answer</button>
          <button onclick='showModelAnswer()'>Show Model Answer</button>
          <button onclick='askNewQuestion()'>Next Question</button>
          <div id='feedback' style='margin-top: 10px; font-weight: bold;'></div>
        `;
      }
    }
    
    function checkMultiPart() {
      const q = currentQuestion;
      const a = parseFloat(document.getElementById("part-a").value);
      const b = parseFloat(document.getElementById("part-b").value);
      const c = parseFloat(document.getElementById("part-c").value);
      let feedback = "<strong>Feedback:</strong><br>";
      let scoreThis = 0;
      if (Math.abs(a - q.answers.a) < 0.1) { feedback += "✅ Part (a) correct<br>"; scoreThis++; }
      else { feedback += `✘ Part (a) incorrect. Ans: ${q.answers.a}<br>`; }
      if (Math.abs(b - q.answers.b) < 0.1) { feedback += "✅ Part (b) correct<br>"; scoreThis++; }
      else { feedback += `✘ Part (b) incorrect. Ans: ${q.answers.b}<br>`; }
      if (Math.abs(c - q.answers.c) < 0.1) { feedback += "✅ Part (c) correct<br>"; scoreThis++; }
      else { feedback += `✘ Part (c) incorrect. Ans: ${q.answers.c}<br>`; }
      score += scoreThis;
      document.getElementById("score").innerText = score;
      document.getElementById("feedback").innerHTML = feedback + `<br><em>Model Answer:</em><br>a) ${q.model.a}<br>b) ${q.model.b}<br>c) ${q.model.c}`;
    }
    
    // Updated robust checkDefinition function for definitions
    function checkDefinition() {
      const q = currentQuestion;
      const input = document.getElementById("student-answer").value.toLowerCase();
      let isCorrect = true;
      
      // General keyword check
      q.keywords.forEach(keyword => {
        const synonyms = q.alternatives[keyword] || [keyword];
        const keywordMatched = synonyms.some(word => input.includes(word));
        if (!keywordMatched) {
          isCorrect = false;
        }
      });
      
      // Robust relationship checks based on specific definitions
      const lowerQ = q.question.toLowerCase();
      
      if (lowerQ.includes("pressure")) {
        const requiredPhrases = ["per unit area", "per area", "divided by area"];
        const forbiddenPhrases = ["times area", "multiplied by area"];
        if (!requiredPhrases.some(phrase => input.includes(phrase))) {
          isCorrect = false;
        }
        if (forbiddenPhrases.some(phrase => input.includes(phrase))) {
          isCorrect = false;
        }
        if (!input.includes("force")) { isCorrect = false; }
      }
      
      if (lowerQ.includes("density")) {
        const requiredPhrases = ["per unit volume", "per volume", "divided by volume"];
        const forbiddenPhrases = ["times volume", "multiplied by volume"];
        if (!requiredPhrases.some(phrase => input.includes(phrase))) {
          isCorrect = false;
        }
        if (forbiddenPhrases.some(phrase => input.includes(phrase))) {
          isCorrect = false;
        }
        if (!input.includes("mass")) { isCorrect = false; }
      }
      
      if (lowerQ.includes("stress")) {
        const requiredPhrases = ["per unit cross-sectional area", "per cross-sectional area", "divided by cross-sectional area"];
        const forbiddenPhrases = ["times cross-sectional area", "multiplied by cross-sectional area"];
        if (!requiredPhrases.some(phrase => input.includes(phrase))) {
          isCorrect = false;
        }
        if (forbiddenPhrases.some(phrase => input.includes(phrase))) {
          isCorrect = false;
        }
        if (!input.includes("force")) { isCorrect = false; }
      }
      
      if (lowerQ.includes("strain")) {
        const requiredPhrases = ["divided by", "over", "ratio"];
        const forbiddenPhrases = ["times", "multiplied by"];
        if (!requiredPhrases.some(phrase => input.includes(phrase))) {
          isCorrect = false;
        }
        if (forbiddenPhrases.some(phrase => input.includes(phrase))) {
          isCorrect = false;
        }
      }
      
      if (lowerQ.includes("electromotive force") || lowerQ.includes("electric potential difference")) {
        const requiredPhrases = ["per unit charge", "divided by charge", "per charge"];
        const forbiddenPhrases = ["times charge", "multiplied by charge"];
        if (!requiredPhrases.some(phrase => input.includes(phrase))) {
          isCorrect = false;
        }
        if (forbiddenPhrases.some(phrase => input.includes(phrase))) {
          isCorrect = false;
        }
      }
      
      if (lowerQ.includes("resistance")) {
        const requiredPhrases = ["ratio", "divided by", "over"];
        const forbiddenPhrases = ["times"];
        if (!requiredPhrases.some(phrase => input.includes(phrase))) {
          isCorrect = false;
        }
        if (forbiddenPhrases.some(phrase => input.includes(phrase))) {
          isCorrect = false;
        }
      }
      
      if (lowerQ.includes("combine uncertainties")) {
        const requiredPhrases = ["add", "sum"];
        const forbiddenPhrases = ["multiply", "product"];
        if (!requiredPhrases.some(phrase => input.includes(phrase))) {
          isCorrect = false;
        }
        if (forbiddenPhrases.some(phrase => input.includes(phrase))) {
          isCorrect = false;
        }
      }
      
      let result = isCorrect ? "✅ Correct!" : "✘ Not quite correct.";
      if (isCorrect) score++;
      result += `<br><em>Model Answer:</em> ${q.model}`;
      document.getElementById("score").innerText = score;
      document.getElementById("feedback").innerHTML = result;
    }
    
    function showModelAnswer() {
      const q = currentQuestion;
      if (q.multi) {
        document.getElementById("feedback").innerHTML = `<em>Model Answer:</em><br>a) ${q.model.a}<br>b) ${q.model.b}<br>c) ${q.model.c}`;
      } else {
        document.getElementById("feedback").innerHTML = `<em>Model Answer:</em> ${q.model}`;
      }
    }
    
    generateTopicCheckboxes();
  </script>
</body>
</html>
